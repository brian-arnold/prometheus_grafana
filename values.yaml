prometheus:
  prometheusSpec:
    nodeSelector:
      kubernetes.io/hostname: at-compute010
    retention: 21d
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: prometheus-storage 
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 50Gi
  # add additional serive monitor to allow prometheus to scrape metrics from nvidia-dcgm-exporter
  additionalServiceMonitors:
    - name: nvidia-dcgm-exporter
      selector:
        matchLabels:
          app: nvidia-dcgm-exporter  # Adjust this to match your service's labels
      namespaceSelector:
        matchNames:
          - gpu-operator
      endpoints:
        - port: gpu-metrics
          interval: 15s

grafana:
  sidecar:
    dashboards:
      annotations:
        grafana_folder: "Defaults"  # Dashboards with this annotation will be put in this folder
      folderAnnotation: "grafana_folder" # custom dashboards can be organized by using the grafana_folder label in your configmap.
      provider:
       foldersFromFilesStructure: true
  # Disable init container that sets ownership - conflicts with existing hostPath data
  initChownData:
    enabled: false
  nodeSelector:
    kubernetes.io/hostname: at-compute010
  persistence:
    enabled: true
    storageClassName: grafana-storage
    size: 2Gi
  # added to allow embedding Grafana panels in Ray Dashboard 
  grafana.ini:
    security:
      allow_embedding: true
    auth.anonymous:
      enabled: true
      org_role: Viewer